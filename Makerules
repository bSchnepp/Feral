MAKE       = bmake

GDB        = lldb # Use LLVM debugger when we can, if we make a makerule for this in the future. (I just happen to be a little more familiar with lldb, that's all)

# Change to aarch64 to target those devices.
#ARCH       = ${ARCH}
KERNEL    := build/$(ARCH)/FERALKER.NEL
ISO       := build/WAYPOINT.ISO

LINKIN    := arch/$(ARCH)/linkin.lld
GRUB_CFG  := arch/$(ARCH)/grub.cfg

TARGET     = -target $(ARCH)-pc-none-gnu

AS        := yasm       # We use yasm to assemble.
CC        := clang      # We use clang to compile.
CXX       := clang++    # We may use C++ for something later. (Would only ever really be a "C with classes" anyway.)
LD        := ld.lld -flavor gnu --verbose

INCLUDES  := inc

## Uncomment for Release builds
# CFLAGS    := -std=c11 -ffreestanding -nostdlib -O2 -Wall -Wextra -mno-red-zone -c -v -mno-mmx -mno-sse -msoft-float -fno-vectorize $(TARGET)
## Debug builds
CFLAGS    := -std=c11 -g3 -ffreestanding -nostdlib -O0 -Wall -Wextra -mno-red-zone -c -v -mno-mmx -mno-sse -msoft-float -fno-vectorize -DKERN_DEBUG $(TARGET)
# -c prevents linking (important!!!) and -v for verbosity.

# We don't really care about 'Entering directory...'.
MAKEFLAGS += --no-print-directory

